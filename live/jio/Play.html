<?php

// Copyright 2021-2024 SnehTV, Inc.
// Licensed under MIT (https://github.com/mitthu786/TS-JioTV/blob/main/LICENSE)
// Created By : TechieSneh

error_reporting(0);
$data = base64_decode($_REQUEST['data']);
$data = explode('=?=', $data);
$cid = $data[0];
$name = str_replace('_', ' ', $cid);
$id = $data[1];

?>

<html lang="en">

<head>
    <title id="pageTitle">Default Title | JioTv</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="description" content="ENJOY FREE LIVE TV">
    <meta name="keywords" content="LIVETV, SPORTS, MOVIES, MUSIC">
    <meta name="author" content="Vaathala">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link rel="stylesheet" href="https://cdn.plyr.io/3.6.2/plyr.css" />
    <script src="https://cdn.plyr.io/3.6.3/plyr.js"></script>
    <script src="main/assets/js/jwplayer.js"></script>
    <link rel="shortcut icon" type="image/x-icon" href="https://i.ibb.co/BcjC6R8/jiotv.png">
    <script type='text/javascript' src='https://content.jwplatform.com/libraries/IDzF9Zmk.js'></script>

<script>
// Get the ID and JSON URL from the URL
var urlParams = new URLSearchParams(window.location.search);
var id = urlParams.get('id');
var jsonUrl = urlParams.get('jsonUrl') || 'default.json'; // Use 'default.json' if jsonUrl is not provided

// Update the title with the ID
document.getElementById('pageTitle').innerText = id + " | Sony Liv";
</script>

<style type='text/css'>
/* Animation */
@keyframes fadeInDown{0%{opacity:0;transform:translateY(-20px)}100%{opacity:1;transform:translateY(0)}}@keyframes rubberBand{from{transform:scale3d(1,1,1)}30%{transform:scale3d(1.25,0.75,1)}40%{transform:scale3d(0.75,1.25,1)}50%{transform:scale3d(1.15,0.85,1)}65%{transform:scale3d(.95,1.05,1)}75%{transform:scale3d(1.05,.95,1)}to{transform:scale3d(1,1,1)}}#arlinablock{background:rgba(0,0,0,0.65);position:fixed;margin:auto;left:0;right:0;top:0;bottom:0;overflow:auto;z-index:999999;animation:fadeInDown 1s}#arlinablock .header{margin:0 0 15px}#arlinablock .inner{background:#E74C3C;color:#fff;box-shadow:0 5px 20px rgba(0,0,0,0.1);text-align:center;width:600px;padding:40px;border-radius:5px;margin:7% auto 2%;animation:rubberBand 1s}#arlinablock button{padding:10px 20px;border:0;background:rgba(0,0,0,0.15);color:#fff;margin:20px 5px;cursor:pointer;transition:all .3s}#arlinablock button:hover{background:rgba(0,0,0,0.35);color:#fff;outline:none}#arlinablock button.active,#arlinablock button:hover.active{background:#fff;color:#222;outline:none}#arlinablock .fixblock{background:#fff;text-align:left;color:#000;padding:20px;height:250px;overflow:auto;line-height:30px}#arlinablock .fixblock div{display:none}#arlinablock .fixblock div.active{display:block}#arlinablock ol{margin-left:20px}@media(max-width:768px){#arlinablock .inner{width:calc(100% - 20px);margin:10px auto;padding:15px}}.inner h2{color: whitesmoke;text-shadow: black;}

/* Say Hi to Adblock */
#arlinablock{background:rgba(0,0,0,0.65);position:fixed;margin:auto;left:0;right:0;top:0;bottom:0;overflow:auto;z-index:999999;animation:fadeInDown 1s}#arlinablock .header{margin:0 0 15px}#arlinablock .inner{background:#E74C3C;color:#fff;box-shadow:0 5px 20px rgba(0,0,0,0.1);text-align:center;width:600px;padding:40px;border-radius:5px;margin:7% auto 2%;animation:rubberBand 1s}#arlinablock button{padding:10px 20px;border:0;background:rgba(0,0,0,0.15);color:#fff;margin:20px 5px;cursor:pointer;transition:all .3s}#arlinablock button:hover{background:rgba(0,0,0,0.35);color:#fff;outline:none}#arlinablock button.active,#arlinablock button:hover.active{background:#fff;color:#222;outline:none}#arlinablock .fixblock{background:#fff;text-align:left;color:#000;padding:20px;height:250px;overflow:auto;line-height:30px}#arlinablock .fixblock div{display:none}#arlinablock .fixblock div.active{display:block}#arlinablock ol{margin-left:20px}@media(max-width:768px){#arlinablock .inner{width:calc(100% - 20px);margin:10px auto;padding:15px}}
</style>
</head>
    <script type='text/javascript' src='//eltontry.com/09/f1/e9/09f1e956c711aea6a898d5abbb78d092.js'></script>

<body>
    <style>
        .jw-svg-icon-pause {
            background-image: url("assets/img/jwplay/pause.svg");
        }

        [class~=jw-svg-icon-pause] path,
        [class~=jw-svg-icon-replay] path,
        [class~=jw-svg-icon-next] path,
        .jw-state-paused .jw-svg-icon-play path,
        [class~=jw-svg-icon-volume-0] path,
        [class~=jw-svg-icon-buffer] path,
        [class~=jw-svg-icon-volume-100] path,
        [class~=jw-svg-icon-rewind] path {
            display: none;
        }

        html {
            font-family: Poppins;
        }

        [class~=jw-svg-icon-fullscreen-on],
        [class~=jw-svg-icon-fullscreen-off],
        .jw-svg-icon-pause,
        [class~=jw-svg-icon-cc-off],
        .jw-svg-icon-close,
        [class~=jw-state-paused] [class~=jw-svg-icon-play],
        .jw-svg-icon-rewind,
        .jw-svg-icon-volume-100,
        [class~=jw-svg-icon-replay],
        [class~=jw-svg-icon-playlist],
        [class~=jw-svg-icon-buffer],
        [class~=jw-svg-icon-quality-100],
        [class~=jw-svg-icon-volume-0],
        [class~=jw-svg-icon-settings],
        [class~=jw-svg-icon-next] {
            background-size: contain;
        }

        [class~=jw-svg-icon-quality-100],
        [class~=jw-svg-icon-replay],
        .jw-svg-icon-pause,
        .jw-svg-icon-rewind,
        [class~=jw-svg-icon-buffer],
        [class~=jw-svg-icon-fullscreen-on],
        .jw-svg-icon-close,
        [class~=jw-svg-icon-playlist],
        [class~=jw-svg-icon-cc-off],
        .jw-svg-icon-volume-100,
        [class~=jw-state-paused] [class~=jw-svg-icon-play],
        [class~=jw-svg-icon-next],
        [class~=jw-svg-icon-settings],
        [class~=jw-svg-icon-fullscreen-off],
        [class~=jw-svg-icon-volume-0] {
            background-repeat: no-repeat;
        }

        [class~=jw-svg-icon-buffer] {
            background-image: url("assets/img/jwplay/buffer.svg");
        }

        html {
            background: #000;
        }

        [class~=jw-icon-playback]:hover [class~=jw-svg-icon-pause] {
            background-image: url("assets/img/jwplay/pause-hover.svg");
        }

        [class~=jw-icon-replay]:hover [class~=jw-svg-icon-replay] {
            background-image: url("assets/img/jwplay/replay-hover.svg");
        }

        [class~=jw-svg-icon-fullscreen-on] {
            background-image: url("assets/img/jwplay/fullscreen-on.svg");
        }

        [class~=jw-svg-icon-fullscreen-on]:hover {
            background-image: url("assets/img/jwplay/fullscreen-on-hover.svg");
        }

        [class~=jw-svg-icon-fullscreen-off] {
            background-image: url("assets/img/jwplay/fullscreen-off.svg");
        }

        [class~=jw-svg-icon-fullscreen-off]:hover {
            background-image: url("assets/img/jwplay/fullscreen-off-hover.svg");
        }

        [class~=jw-svg-icon-volume-100] {
            background-image: url("assets/img/jwplay/volume-100.svg");
        }

        [class~=jw-svg-icon-volume-100]:hover {
            background-image: url("assets/img/jwplay/volume-100-hover.svg");
        }

        [class~=jw-svg-icon-volume-0] {
            background-image: url("assets/img/jwplay/volume-0.svg");
        }

        [class~=jw-svg-icon-volume-0]:hover {
            background-image: url("assets/img/jwplay/volume-0-hover.svg");
        }

        [class~=jw-svg-icon-playlist] {
            background-image: url("assets/img/jwplay/playlist.svg");
        }

        [class~=jw-svg-icon-playlist]:hover {
            background-image: url("assets/img/jwplay/playlist-hover.svg");
        }

        [class~=jw-svg-icon-cc-off] {
            background-image: url("assets/img/jwplay/cc-off.svg");
        }

        [class~=jw-svg-icon-cc-off]:hover {
            background-image: url("assets/img/jwplay/cc-off-hover.svg");
        }

        [class~=jw-svg-icon-quality-100] {
            background-image: url("assets/img/jwplay/quality-100.svg");
        }

        [class~=jw-svg-icon-quality-100]:hover {
            background-image: url("assets/img/jwplay/quality-100-hover.svg");
        }

        [class~=jw-svg-icon-settings] {
            background-image: url("assets/img/jwplay/settings.svg");
        }

        [class~=jw-svg-icon-settings]:hover {
            background-image: url("assets/img/jwplay/settings-hover.svg");
        }

        [class~=jw-svg-icon-close] {
            background-image: url("assets/img/jwplay/close.svg");
        }

        [class~=jw-svg-icon-close]:hover {
            background-image: url("assets/img/jwplay/close-hover.svg");
        }

        [class~=jw-svg-icon-rewind] {
            background-image: url("assets/img/jwplay/rewind.svg");
        }

        [class~=jw-svg-icon-rewind]:hover {
            background-image: url("assets/img/jwplay/rewind-hover.svg");
        }

        [class~=jw-svg-icon-next] {
            background-image: url("assets/img/jwplay/next.svg");
        }

        [class~=jw-svg-icon-next]:hover {
            background-image: url("assets/img/jwplay/next-hover.svg");
        }

        .jwplayer {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            height: 100%;
        }

        #video-player {
            height: 100vh;
            overflow: hidden;
            width: 100vw;
            position: absolute;
        }
    </style>

    <div id="video-player">
        <div id="player"></div>
        <div id="loading"></div>
    </div>
    <script>
        const playerInstance = jwplayer("player");

        // Get the JSON data from the JSON URL
        fetch(jsonUrl)
            .then(response => response.json())
            .then(jsonData => {
                // Extract the stream URL from the JSON data
                const streamURL = jsonData[id];
                if (!streamURL) {
                    console.error('Stream URL not found for ID:', id);
                    return;
                }

                playerInstance.setup({
                    "file": streamURL,
                    "width": "100%",
                    "height": "100%",
                    "aspectratio": "16:9",
                    "autostart": true,
                    "controls": true,
                    "repeat": true,
                    "preload": "auto",
                    "stretching": "uniform",
                    "cast": {},
                    "playbackRateControls": true,
                    "sharing": {
                        "sites": ["reddit", "facebook", "twitter"]
                    },
                    "logo": {
                        "file": "https://i.ibb.co/BcjC6R8/jiotv.png",
                        "hide": true,
                        "link": "https://jiotv.example.com"
                    },
                    "abouttext": "TechieSneh",
                    "aboutlink": "https://jiotv.example.com"
                });

                playerInstance.on('play', function() {
                    console.log('Playing:', streamURL);
                });
            })
            .catch(error => {
                console.error('Error fetching JSON data:', error);
            });
    </script>
</body>

</html>
